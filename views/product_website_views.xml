<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- Clean [Icecat] prefix from accordion titles -->
        <template id="clean_icecat_accordion" 
                  inherit_id="website_sale_comparison.accordion_specs_item" 
                  name="Clean Icecat Accordion Display"
                  priority="20">
            <xpath expr="//div[@class='accordion-header my-0 h6']/button" position="replace">
                <button 
                    class="accordion-button collapsed fw-medium" 
                    type="button" 
                    data-bs-toggle="collapse" 
                    t-attf-data-bs-target="#category_accordion_{{category_index}}" 
                    aria-expanded="false" 
                    aria-controls="specifications">
                    <!-- Strip [Icecat] prefix from category names - safe string handling -->
                    <t t-set="cat_name" t-value="str(category.name or '')"/>
                    <t t-if="cat_name.startswith('[Icecat] ')">
                        <t t-out="cat_name[9:]"/>
                    </t>
                    <t t-elif="cat_name.startswith('[ICECAT] ')">
                        <t t-out="cat_name[9:]"/>
                    </t>
                    <t t-else="">
                        <t t-out="cat_name if cat_name else category.name"/>
                    </t>
                    <!-- Keep original Specifications/Others text below name -->
                    <t t-if="category_size == 1">
                        <br/><small class="text-muted">Specifications</small>
                    </t>
                    <t t-else="">
                        <br/><small class="text-muted">Others</small>
                    </t>
                </button>
            </xpath>
        </template>

    </data>
</odoo>
